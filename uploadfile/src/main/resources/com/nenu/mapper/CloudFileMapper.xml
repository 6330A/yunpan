<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nenu.mapper.CloudFileMapper">
    <select id="getFilesByType" resultType="com.nenu.pojo.CloudFile">
        select * from cloudfile
        where user_id = #{userId}
        <if test="types != null and types.size() > 0">
            and file_type in
            <foreach item="type" collection="types" open="(" separator="," close=")">
                #{type}
            </foreach>
        </if>
    </select>

<!--    查找不是里面的类型元素-->
    <select id="getFilesByNotType" resultType="com.nenu.pojo.CloudFile">
        select * from cloudfile
        where user_id = #{userId}
        <if test="types != null and types.size() > 0">
            and file_type not in
            <foreach item="type" collection="types" open="(" separator="," close=")">
                #{type}
            </foreach>
        </if>
    </select>

    <delete id="deleteCloudFileByFileIdList" parameterType="java.util.List">
        delete from cloudfile
        where file_id in
        <foreach collection="fileIdList" item = "fileId" open = "(" close = ")" separator=",">
            #{fileId}
        </foreach>
    </delete>
</mapper>